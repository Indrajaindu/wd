<html>
<head>
  <meta charset="utf-8" />
</head>
<body>
<script src="../../gospa.js"></script>
<title> 陳鍾誠  / 教科書  / C 語言 / 變動參數(va_arg) -- 變動個數參數，也就是使用 … 宣告的參數，要如何使用呢？</title>

 [[陳鍾誠]](ccc:home)  / [[教科書]](book:home)  / [[C 語言]](c:home) 

<h2 id="va_arg">變動參數(va_arg) -- 變動個數參數，也就是使用 … 宣告的參數，要如何使用呢？</h2>

<h3 id="">範例：印出整數串列</h3>

<pre><code class="CPP">#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;

void printList(int head, ... ) {
  va_list va;
  va_start(va, head);
  int i;
  for(i=head ; i != -1; i=va_arg(va,int)) {
    printf("%d ", i);
  }
  va_end(va);
}

int main( void ) {
  printList(3, 7, 2, 5, 4, -1);
}
</code></pre>

<p>執行結果</p>

<pre><code>D:\cp&gt;gcc vaarg.c -o vaarg

D:\cp&gt;vaarg
3 7 2 5 4
</code></pre>

<ul>
<li>範例</li>
</ul>

<pre><code class="CPP">#include &lt;stdio.h&gt;

int debug(const char *fmt, ...)
{
  va_list args;
  va_start(args, fmt);
  return vprintf(fmt, args);
}

int main() {
  debug("pi=%6.2f\n", 3.14159);
}
</code></pre>

<p>執行結果：</p>

<pre><code>D:\cp&gt;gcc debug.c -o debug

D:\cp&gt;debug
pi=  3.14
</code></pre>

</body>
</html>